################################################
## GENERAL SETTINGS
################################################

shared_writable_dirs:
	- /manifest/cache
	- /manifest/logs
	- /manifest/tmp
	- /workspace/uploads

permissions:
	"^manifest/(.*)$":
		- all: deny
	"^workspace/utilities/(.*).xsl$":
		- all: deny
	"^workspace/pages/(.*).xsl$":
		- all: deny
	"^(.*).sql$":
		- all: deny
	"(^|/)\.":
		- all: deny

url_rewrites:
	### IMAGE RULES
	- "^/image\/(.+\.(jpg|gif|jpeg|png|bmp))$ /extensions/jit_image_manipulation/lib/image.php?param=$1 last"

	### CHECK FOR TRAILING SLASH - Will ignore files
	-
		rule: "^(.*)$ $1/ redirect"
		conditions:
			- '$request_filename !~ "/$"'

	### URL Correction
	- "^/(symphony/)?index.php(/.*/?) /$1$2"

	### SIMPLE ADMIN REWRITE
	- "^/symphony\/?$ /?mode=administration&$query_string last"

	### ADVANCED ADMIN REWRITE
	-
		rule: "^/symphony(\/(.*\/?))?$ /?symphony-page=$1&mode=administration&$query_string last"
		conditions:
			- "!-f $request_filename"
			- "!-d $request_filename"

	### FRONTEND REWRITE - Will ignore files and folders
	-
		rule: "^/(.*\/?)$ /?symphony-page=$1&$query_string last"
		conditions:
			- "!-f $request_filename"
			- "!-d $request_filename"


################################################
## WEB SPECIFIC SETTINGS
################################################

document_root: /
index_list: [index.html, index.php]
default_gateway: index.php
error_pages:
	403: /forbidden/
	404: /page-not-found/


################################################
## PHP SPECIFIC SETTINGS
################################################

php_version: 5.3.5
php_extensions:
	- curl
	- dom
	- mysql
	- xml
	- xsl
	- zip
php_error_reporting: 'E_ALL'
php_display_errors: On
php_short_open_tag: On
php_default_mimetype: text/html
php_date_timezone: America/Vancouver
php_max_execution_time: 30
php_max_input_time: 60
php_post_max_size: 8M
php_file_uploads: On
php_upload_max_filesize: 2M
php_max_file_uploads: 20